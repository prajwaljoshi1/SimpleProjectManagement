<!-- pass current user id from rails to backbone -->
<script>
     var app = app || {};
     <% if current_user  %>
       app.current_user = <%= current_user.id %>
    <% end %>
</script>


<div id="main"></div>



<!-- MY Projects Page Template-->
<script id="my-projects-page" type="text/template">

<h2 class ="page-heading">{{= app.user.attributes.user.name}}'s Projects</h2>


<div class="my-projects" style="overflow: auto">
  <div class="row-fluid">
  {{ projects.each(function (project) { }}
  <a  class="project-link" href="/#projects/{{= project.id }}">
    <div class="col-sm-3 well project-display">
        <div class="project-title">{{= project.escape('title') }}</div>
        <hr>
        <div class="project-organisation">{{= project.escape('organisation') }}</div>
        <hr>
        <div class="project-description">{{= project.escape('description') }}</div>
    </div>
    </a>
  {{ }); }}
</div>
</div>

<div>
  <!-- <button class="add-project-btn btn btn-default btn-lg">Add New Project</button> -->
  <%= link_to "Add New Project", project_new_path, class: "add-project-btn btn btn-default btn-lg" %>
</div>

</script>


<script id="project-page" type="text/template">
    <h2>{{= project.escape('title')}}</h2>
    <div class="well user-list"></div>
    <div class="list-of-tasklist" id = "project{{=project.id}}">

        <span class="my-tasklists list"></span>


      <span class=" task-list add-list well">
          <form class="add-task-list form-control " id="tasklist{{=project.id}}">
            <input type="text"
              style="border:none"
               class="task-title"
               id="add-list"
               placeholder="Add a list" />
            <input type="submit" value=" + " data-project-id="{{=project.id}}" class="add-list-button" class="btn btn-primary btn-xs"/>
        </form>
      </span>
    </div>
</script>



<script id="individual-list" type="text/template">
    <div class="list-name">{{=taskList.escape('title')}}</div>

    <div class="task"></div>




    <div class="add-task well">
      <form class="add-task form-control " id="list{{=taskList.id}}">
        <input type="text"
        style="border:none"
           class="task-title"
           id="add-task"
           placeholder="Add a task ..." />
        <input type="submit" value=" + " data-tasklist-id="{{=taskList.id}}" class="add-task-button" class="btn btn-primary btn-xs"/>
    </form>
    </div>



</script>



<script id="individual-task" type="text/template">
  {{ tasks.each( function (task){ }}
  <div class="well dropzone" id="task-{{=task.id}}">
    <button class="delete"
              id="{{= task.id}}">X</button>
    <div class="list-name">{{=task.escape('title')}}</div>
    <div align="right" id="dropzone"> <span class="task-alias">{{=task.escape('alias')}}</span> </div>
  </div>
  {{ }); }}

</script>

<script id="member-list" type="text/template">
  <div>
    <ul class="users">
      {{ users.each(function(user) {  }}
        <li class="user " id="user-{{=user.id}}" alias={{=user.get('alias')}}>
          <span class="user-alias" >
            <span class="user-alias-span" >{{= user.get('alias')}}</span>
          </span>
        </li>
      {{ }); }}
    </ul>
  </div>
  <div class="add-member-form">
    <form class="add-user">
    <input type="text"
          id="member-email"
         name="user_id"
         placeholder="Enter Email Address" />
  <input type="submit" value="Add Member" />
</form>
</div>
</script>


<script id="task-modal" type="text/template">
    <div class="task-title">Task Description: {{= task.task.description }}</div>

      <div id="task-message-form">Textarea view goes here</div>

        <ul id="messages">

          <li align="center"><strong>Messages:</strong></li>
        </ul>
</script>





<script id="task-message-template" type="text/template">
  <textarea id="task-message" placeholder=""></textarea>
  <button>Post</button>
</script>
